!function(){let e;this.preOrderCustomConfig={enableCartRedirection:!0};let t="https://dev-hc.hotwax.io",n=function(e,t){let n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)};async function o(){if(location.pathname.includes("products")){const o=e("form[action='/cart/add']").serializeArray().find(e=>"id"===e.name).value,a=meta.product.variants.map(e=>String(e.id)),r=e("#hc_preorderButton"),i=await(n=a,new Promise(function(o,a){e.ajax({type:"POST",url:`${t}/api/checkPreorderItemAvailability`,data:JSON.stringify({filters:{sku:n,sku_op:"in"}}),dataType:"json",crossDomain:!0,headers:{"Content-Type":"application/json"},success:function(e){o(e)},error:function(e){a(e)}})})).catch(e=>console.error(e));let c=e("#hc_preordershipsfrom"),s=e("#hc_preordershipsfrom span");if(i&&i.count>0){const t=i.docs.find(e=>e.sku===o);if(t){const n=moment.utc(t.estimatedDeliveryDate),o=moment(n).local().format("MMM Do YYYY");r.html("Pre Order"),c.length>0&&s.html(`${o}`),c.css("visibility","visible"),r.on("click",function(t){let n=e("form[action='/cart/add']");t.preventDefault(),t.stopImmediatePropagation();let o=e('<input id="pre-order-item" name="properties[Note]" value="Pre-Order" type="hidden"/>');n.append(o),e.ajax({type:"POST",url:"/cart/add.js",data:n.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),o.remove()}.bind(null))}}}var n}"undefined"==typeof jQuery||parseFloat(jQuery.fn.jquery)<1.7?n("//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",function(){(e=jQuery.noConflict(!0))(document).ready(function(){o()})}):(e=jQuery)(document).ready(function(){o()}),"undefined"==typeof moment&&n("https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js",function(){console.log("moment js loaded")});let a=location.href;new MutationObserver(()=>{location.href!==a&&(a=location.href,o())}).observe(document,{subtree:!0,childList:!0})}();