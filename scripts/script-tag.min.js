!function(){let e,r,t,a;function n(){location.pathname.includes("products")&&(r=e("#hc_preorderButton, .hc_preorderButton").html())}this.preOrderCustomConfig={enableCartRedirection:!0};async function i(){if(location.pathname.includes("products")){const n=e("form[action='/cart/add']").serializeArray().find(e=>"id"===e.name).value,i=e("#hc_preorderButton, .hc_preorderButton");let d="",o=e("#hc_preordershipsfrom"),l=e("#hc_preordershipsfrom span");o.css("visibility","hidden"),i.html(r),i.off("click",c),i.siblings().css("display","block");let s=await new Promise(function(r,t){e.getJSON(`${window.location.pathname}.js`,function(e){(e.tags.includes("Pre-Order")||e.tags.includes("Back-Order"))&&r(e),t(!1)})}).then(e=>(d=e.tags.includes("Pre-Order")?"Pre-Order":e.tags.includes("Back-Order")?"Back-Order":"",e.variants.find(e=>e.id==n).available)).catch(e=>e);if(e("input[id='hc_inventory']").val()>0&&(s=!1),!s)return;const p=e("input[id='hc_backOrderDate']").val(),u=e("input[id='hc_preOrderDate']").val();t="Pre-Order"===d?u:"Back-Order"===d&&p;let h=new Date;h.setHours(0,0,0,0),new Date(t)<h&&(t=""),i.siblings().css("display","none"),a="Pre-Order"===d?"Pre Order":"Back-Order"===d&&"Back Order",i.html(a),o.length>0&&(t&&"NULL"!==t&&"_NA_"!==t?(l.html(`${t}`),o.css("visibility","visible")):"Back-Order"===d&&e(".hc_backorderString").length&&(o.css("visibility","visible"),t=e(".hc_backorderString").text(),l.html(`${t}`))),i.off("click"),i.on("click",c)}else e("input[id='hc_tags']").map(async function(r,t){const a=e(t);if(a.val().includes("Pre-Order")||a.val().includes("Back-Order")){const r=a.siblings("input[id=hc_backOrderDate]").val(),t=a.siblings("input[id=hc_preOrderDate]").val(),n=a.siblings("input[id=hc_continueSelling]").val(),i=a.siblings("input[id=hc_inventory]").val(),c=a.val().includes("Pre-Order")?"Pre-Order":a.val().includes("Back-Order")&&"Back-Order";if(n&&"true"==n&&i<=0){const n=a.siblings("#hc_preorderButton, .hc_preorderButton"),i=a.parent();let o="Pre-Order"===c?t:"Back-Order"===c&&r,l=new Date;l.setHours(0,0,0,0),new Date(o)<l&&(o="");const s="Pre-Order"===c?"Pre Order":"Back-Order"===c&&"Back Order";n.val(s),o&&"_NA_"!=o&&"NULL"!=o||"Back-Order"!==c||!e(".hc_backorderString").length||(o=e(".hc_backorderString").text()),n.on("click",{cartForm:i,label:s,date:o},d)}}})}function d(r){r.preventDefault(),r.stopImmediatePropagation();let t=e(`<input id="pre-order-item" name="properties[Note]" value="${r.data.label}" type="hidden"/>`),a=e(`<input id="pre-order-item" name="properties[PROMISE_DATE]" value="${r.data.date}" type="hidden"/>`);r.data.cartForm.append(t),r.data.date&&"NULL"!==r.data.date&&"_NA_"!==r.data.date&&r.data.cartForm.append(a),e.ajax({type:"POST",url:"/cart/add.js",data:r.data.cartForm.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),t.remove(),r.data.date&&"NULL"!==r.data.date&&"_NA_"!==r.data.date&&a.remove()}function c(r){let n=e("form[action='/cart/add']");r.preventDefault(),r.stopImmediatePropagation();let i=e(`<input id="pre-order-item" name="properties[Note]" value="${a}" type="hidden"/>`),d=e(`<input id="pre-order-item" name="properties[PROMISE_DATE]" value="${t}" type="hidden"/>`);n.append(i),t&&"NULL"!==t&&"_NA_"!==t&&n.append(d),e.ajax({type:"POST",url:"/cart/add.js",data:n.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),i.remove(),t&&"NULL"!==t&&"_NA_"!==t&&d.remove()}"undefined"==typeof jQuery||parseFloat(jQuery.fn.jquery)<1.7?function(e,r){let t=document.createElement("script");t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,r())}:t.onload=function(){r()},t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}("//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",function(){(e=jQuery.noConflict(!0))(document).ready(function(){n(),i()})}):(e=jQuery)(document).ready(function(){n(),i()});let o=location.href;new MutationObserver(()=>{location.href!==o&&(o=location.href,i())}).observe(document,{subtree:!0,childList:!0})}();