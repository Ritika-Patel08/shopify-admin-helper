!function(){let e,t;this.preOrderCustomConfig={enableCartRedirection:!0};let a="https://dev-hc.hotwax.io";function o(){location.pathname.includes("products")&&(t=e("#hc_preorderButton, .hc_preorderButton").html())}let n=function(e,t){let a=document.createElement("script");a.type="text/javascript",a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,t())}:a.onload=function(){t()},a.src=e,document.getElementsByTagName("head")[0].appendChild(a)};async function r(){if(location.pathname.includes("products")){const n=e("form[action='/cart/add']").serializeArray().find(e=>"id"===e.name).value,r=meta.product.variants.map(e=>String(e.id)),c=e("#hc_preorderButton, .hc_preorderButton"),d=await(o=r,new Promise(function(t,n){e.ajax({type:"POST",url:`${a}/api/checkPreorderItemAvailability`,data:JSON.stringify({filters:{sku:o,sku_op:"in"}}),dataType:"json",crossDomain:!0,headers:{"Content-Type":"application/json"},success:function(e){t(e)},error:function(e){n(e)}})})).catch(e=>console.error(e));let l=e("#hc_preordershipsfrom"),s=e("#hc_preordershipsfrom span");if(l.css("visibility","hidden"),c.html(t),d&&d.count>0){const e=d.docs.find(e=>e.sku===n);if(e){const t=e.estimatedDeliveryDate?moment.utc(e.estimatedDeliveryDate):"",a=e.estimatedDeliveryDate?moment(t).local().format("MMM Do YYYY"):"",o="PRE-ORDER"===e.label?"Pre Order":"BACKORDER"===e.label&&"Back Order";c.html(o),l.length>0&&s.html(`${a}`),e.estimatedDeliveryDate&&l.css("visibility","visible"),c.bind("click",{localDeliveryDate:a,buttonLabel:o},i)}}}var o}function i(t){let a=e("form[action='/cart/add']");t.preventDefault(),t.stopImmediatePropagation();let o=e(`<input id="pre-order-item" name="properties[Note]" value="${t.data.buttonLabel}" type="hidden"/>`),n=e(`<input id="pre-order-item" name="properties[PROMISE_DATE]" value="${t.data.localDeliveryDate}" type="hidden"/>`);a.append(o),a.append(n),e.ajax({type:"POST",url:"/cart/add.js",data:a.serialize(),dataType:"JSON",success:function(){preOrderCustomConfig.enableCartRedirection&&location.replace("/cart")}}),o.remove(),n.remove()}"undefined"==typeof jQuery||parseFloat(jQuery.fn.jquery)<1.7?n("//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",function(){(e=jQuery.noConflict(!0))(document).ready(function(){r(),o()})}):(e=jQuery)(document).ready(function(){r(),o()}),"undefined"==typeof moment&&n("https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js",function(){console.log("moment js loaded")});let c=location.href;new MutationObserver(()=>{location.href!==c&&(c=location.href,r())}).observe(document,{subtree:!0,childList:!0})}();